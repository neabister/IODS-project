# Chapter 2: Regression and model validation  

In this exercise I analyze preprocessed data.  

###Link to preprocessing R script:  
<https://github.com/neabister/IODS-project/blob/master/data/create_learning2014.R>
  
###Link to original data:  

<http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt>
  

###Original data and preprocessing  
Data is from Introduction to statistics course learning approaches study carried out in Helsinki 2014 and it is a part of multinational study. Approaches are defined by ASSIST guidelines and divided into three categories: Deep, Surface and Strategic study approaches. Students participated by filling in questionaires relating to these 3 approaches by answering 1-5 (least agreeing - most agreeing). In addition, data contains a measure for each student's attitude and achievements based on exam points.

In preprocessing, questions were divided into **Deep, Surface** and **Strategic** groups and for each group mean was calculated for each student. Analysis dataset includes additional information on gender, attitude and exam points. Students who had 0 points from exam were excluded.  

###Data analysis  

####Read the data and explore it  
```{r}
data <- read.csv('data/analysis_dataset.csv')
head(data)
dim(data)
str(data)

```
  
*Data contains 7 variables (columns) from 166 observations (students, rows). All variables are numeric or integers except gender which has 2 factors (female or male).*  

###Summary and graphical overview of the data  

```{r}
summary(data)
```

```{r}
library(ggplot2)
library(GGally)

p <- ggpairs(data, title = "Correlation summary graphs", mapping = aes(col = gender, alpha = 0.4), lower = list(combo = wrap('facethist', bins = 20)))

p
```

*Data contains more females than males but other variables are not dependent on gender. Participants age between 17-55. Gender independent **highest (positive) correlation is between points and attitude** (0.437) and **lowest (negative) correlation between points and deep learning approaches** (-0.0101). This could suggest that exams do not measure level of deep learning. However, points correlate best with strategic approaches (positive correlation), suggesting that focus on planning and scheduling could improve exam points.*

###Linear regression fitting  

To try to explain target variable **points**, I selected 3 variables that had highest negative or positive correlation (**attitude**, **stra**, **surf**) with it and fitted linear regression.  

```{r}
linear_3_variables <- lm(points ~ attitude + stra + surf, data = data)
summary(linear_3_variables)
```

*Attitude is the only significant variable to explain points.*  
Fitting linear regression using only significant **attitude** variable:  

```{r}
linear_attitude <- lm(points ~ attitude, data = data)
summary(linear_attitude)
```

*By removing non-significant variables, also Adj. R^2^ is decreasing*  

###Diagnostic plots for multiple regression  

`Residuals vs Fitted values`, `Normal QQ-plot and` and `Residuals vs Leverage` diagnostic plots produced.  

```{r}
plot_diagnostics <- plot(linear_3_variables, which = c(1, 2, 5), par(mfrow = c(2,3)))


```